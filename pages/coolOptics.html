<!DOCTYPE html>
<html>
	<head>
		<title>Cool Optics</title>
		<link rel="stylesheet" href="../styles/opticsStyles.css">
	</head>
	<body>
		<canvas id='canvas'></canvas>
		<script src='../scripts/optics/opticsProcedurals.js'></script>
		<script src='../scripts/optics/LightSource.js'></script>
		<script src='../scripts/optics/Vector.js'></script>
		<script src='../scripts/optics/CloakSphere.js'></script>
		<script>
			
			let canvas = E('canvas');
			let ctx = canvas.getContext('2d');
			// Stuff here is for quick debug
			
			// An array of all optics for checking influence on travelling rays
			let optics = [];
			let sources = [];
			
			// Element 1
			let origin = VectorFactory.create(150, 350);
			let radius = 100;
			let sphere = CloakSphereFactory.create(origin, radius, 
				function (rho) {
					if (rho > 100){
						return 1;
					}
					return 1.5;
				}
			, '    n(r) = 1.5');
			optics.push(sphere);
			
			// Element 2
			origin = VectorFactory.create(300, 400);
			radius = 100;
			sphere = CloakSphereFactory.create(origin, radius,
				function (rho) {
					if (rho > 100){
						return 1;
					}
					return 1 + Math.sqrt(rho / radius);
				}
			, 'n(r) = 1 + sqrt(r)');
			optics.push(sphere);
			
			//Element 3
			origin = VectorFactory.create(450, 350);
			radius = 100;
			sphere = CloakSphereFactory.create(origin, radius,
				function (rho) {
					if (rho > 100){
						return 1;
					}
					let sincPart = Math.sin(Math.PI * rho / radius) * radius / rho;
					return 1 +  0.5 * sincPart * sincPart;
				}
			, 'n(r) = 1 + sinc^2(r)');
			optics.push(sphere);
			
			// Element 4
			origin = VectorFactory.create(150, 650);
			radius = 100;
			sphere = CloakSphereFactory.create(origin, radius,
				function (rho) {
					if (rho > 100){
						return 1;
					}
					return 1 + Math.pow(rho / radius, 2);
				}
			, 'n(r) = 1 + r^2');
			optics.push(sphere);
			
			// Element 5
			origin = VectorFactory.create(300, 700);
			radius = 100;
			sphere = CloakSphereFactory.create(origin, radius,
				function (rho) {
					if (rho > 100){
						return 1;
					}
					return 1 + 1 / (1 + Math.exp(4 * (rho / radius - 0.5)));
				}
			, 'n(r) = 1 + sigmoid(r)');
			optics.push(sphere);
			
			// Element 6
			origin = VectorFactory.create(450, 650);
			radius = 100;
			sphere = CloakSphereFactory.create(origin, radius,
				function (rho) {
					if (rho > 100){
						return 1;
					}
					return 1 + 0.5 * Math.sin(2 * Math.PI * rho / radius);
				}
			, 'n(r) = 1 + sin(r)');
			optics.push(sphere);
			
			
			for (let i = 0; i < 10; i++) {
				let ls = LightSourceFactory.create(VectorFactory.create(60, 75 + 15 * i), VectorFactory.create(100, 0));
				sources.push(ls);
			}
			
			// Painting stuff (eventually to go in a painting method)
			repaint(ctx);
			
		</script>
		<script src='../scripts/optics/Mouse.js'></script>
	</body>
</html>